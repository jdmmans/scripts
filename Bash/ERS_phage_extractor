cat /data/cephfs/punim0599/Jesse/emm75/edit_phage.txt | while read line; do  if [[ "$line" == *"ERS"* ]] ; then fas=$(echo "$line" | grep -o -P '(?<=fasta-).*(?=-fasta)'); contig=$(echo "$line" | grep -o -P '(?<=contig-).*(?=-contig)'); start=$(echo "$line" | grep -o -P '(?<=first-).*(?=-first)'); end=$(echo "$line" | grep -o -P '(?<=last-).*(?=-last)');  start=$((${start} + 1)); end=$((${end} + 1));  dest="/data/cephfs/punim0599/Jesse/emm75/phagecontent/${fas},${contig},${start}.fna"; tempor="/data/cephfs/punim0599/Jesse/emm75/phagecontent/temp.txt";  cut_off="$(grep -n ${contig} /data/cephfs/punim0599/Jesse/emm75/contigs/${fas}fna  | cut -d : -f 1)"; cut_off=$((${cut_off} + 1));  echo ">${contig}" > ${dest};  tail -n +${cut_off} "/data/cephfs/punim0599/Jesse/emm75/contigs/${fas}fna" > ${tempor}; tr -d '\n' < ${tempor} | cut -b${start}-${end} >> ${dest};  echo "${dest}" rm ${tempor}; fi; done
