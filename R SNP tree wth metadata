# dependencies
library(treeio)
library(ggtree)
library(tidytree)
library(phylogram)

## My data + attempt
coretree<- "/Users/jmmans/Desktop/trees/gubbinscore.nwk"
coretree <- read.tree(coretree)

#ordering
cord1<- coretree[["tip.label"]]

#tree itself
tree <- ggtree(coretree)
tree <- as.phylo(tree)
genotype <- read.csv("/Users/jmmans/Desktop/emm75_meta/R_meta.csv", header = TRUE)
genotype <- arrange(genotype, factor(Isolate, levels = cord1))
genotype <- subset(genotype, select= c(Continent))

# cutting off metadata
len<- length(tree$tip.label)
genotype<- head(genotype, len)
genotype <- data.frame(genotype)
rownames(genotype) <- tree$tip.label

circ <- ggtree(tree, layout = "circular")
circ 

p1 <- gheatmap(circ, genotype) +
                  scale_fill_viridis_d(option="D", name="continent")

p1
